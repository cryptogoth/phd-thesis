It is now natural to ask: given such dramatic improvement in circuit depth
for hybrid nearest-neighbor factoring
from quadratic \cite{Kutin2006} to poly-logarithmic in the last chapter, can we
decrease depth further? Surprisingly, the answer is yes. In this
chapter, we now decrease the depth below poly-logarithmic, in fact,
to be $O((\log \log n)^2)$. To do this, we take inspiration from
two main lines of related work. First, it is known how to compute
many useful arithmetic functions, including those used in modular
exponentiation, in constant depth by introducing a threshold gate.
Second, a similar construction (on \textsf{AC}) gives us a
quantum OR gate. Using these results,
we construct a \emph{quantum majority gate} on \textsf{2D CCNTCM} to
achieve quantum modular exponentiation, and therefore factoring, in the above
depth.

In Section \ref{sec:fsl-circuits} we provide background for classical circuit complexity,
including common universal gate sets, how they allow us to define circuit
complexity classes, and the relationships between those classes. We also
discuss the powerful threshold gate and its variations. Finally, we provide
quantum analogues for all these notions.
The quantum threshold
gate can be decomposed into simpler operations, namely CNOT and
arbitrary single-qubit gates, while maintaining constant-depth.

However,
even this simple gate set must be compiled down to \textsf{2D CCNTCM}.
This accounts for the discrepancy between the
non-constant quantum depth upper bound and the constant classical
depth lower bound mentioned above. Our solution is to augment our factoring circuit
with quantum compiler modules using the Kitaev-Shen-Vyalyi method \cite{Kitaev2002}
and the programmable ancillae rotation method of Jones et al. \cite{Jones2012}.
We discuss this special case of quantum
compiling overhead and its effect on our factoring implementation in
Section \ref{sec:fsl-qcompile}.

We then discuss our main result in Section \ref{sec:fsl-majority},
a \textsf{2D CCNTCM} implementation
of a quantum majority gate with fanin $n$ having circuit
depth $O((\log \log n)^2)$ and
circuit size and width $O(n^2\log^2 n)$. Using this quantum
majority gate and the constant-depth majority circuits of
Reif-Tate \cite{Reif1992} and Yeh-Varvarigos \cite{Yeh1996},
we achieve a complete circuit for quantum modular exponentiation.
We conclude in Section \ref{sec:fsl-conclude} with open problems
related to factoring architectures.