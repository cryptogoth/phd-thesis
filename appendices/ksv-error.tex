\chapter{KSV Error from Early Measurement}
\label{app:ksv-error}

In this appendix, we provide a detailed calculation for the error in
phase estimation due to Kitaev, Shen, and Vyalyi (KSV) where projective
measurement is used instead of a coherent measurement. This is called
\emph{early measurement} in Section \ref{sec:qcompile-ksv} of
Chapter \ref{chap:qcompile} where it is used.
We will mainly expand
upon
the exposition in Chapter 12 and 13 in \cite{Kitaev2002}.The use
of projective measurement is to offload the solution of a
modular inverse equation (Equation \ref{eqn:mod-inverse})
and many trigonometric operations
onto a classical controller instead of doing them coherently on a quantum
computer. The cost of projective measurement is leaving garbage qubits in
the ancillae of the target register, but this is a small ($O(n)$)
amount relative to
the size of circuits ($poly(n)$) that we may wish to compile using the KSV procedure.
Our goal is to show that this increase in error by a square root
factor is negligible and may be preferable in realistic implementations.

To begin with, we review (coherent) measurement operators as a generalization of
controlled quantum operators in Section \ref{sec:meas-ops} and introduce
notation in Section \ref{sec:meas-notation}.
We define what it means for a measuring operator to measure a function
in Section \ref{sec:meas-func}. Then we extend our definition in
Section \ref{sec:meas-ancillae} in three ways which require ancillae
qubits: garbage qubits left in the ancillae, non-copy operations
out of the ancillae, and approximate measurement.
Next, we calculate the error of a coherent measurement operation which
incorporates all of these extensions in Theorem \ref{thm:coherent}.
Finally, in our main result, we upper bound the error for
early projective measurement in Theorem \ref{thm:projective}.
We show that the error in the projective case is greater than the
error in the coherent case by a factor equal to the size of
the orthogonal basis decomposition of the measurement object subsystem.

\input{appendices/ksv-error-background}

\input{appendices/ksv-error-measure-ancillae}

\input{appendices/ksv-error-calculations}
